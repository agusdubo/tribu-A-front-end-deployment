{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{Folder,ArrowLeft,Clock}from'lucide-react';import Header from'../components/Header';import LoadingState from'../components/LoadingState';import AuthService from'../services/AuthService';import APIClient from'../services/APIClient';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProjectSelection=()=>{const navigate=useNavigate();const user=AuthService.getCurrentUser();const resourceId=user===null||user===void 0?void 0:user.employeeCode;const[projects,setProjects]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{if(!resourceId){setError('Falta información del empleado. Redirigiendo a login...');AuthService.logout();navigate('/');return;}const loadProjects=async()=>{setLoading(true);setError(null);try{const loadedProjects=await APIClient.getProjectsByEmployeeId(resourceId);setProjects(loadedProjects);}catch(err){setError(\"Error al cargar proyectos: \".concat(err.message));console.error('Error al cargar proyectos:',err);}finally{setLoading(false);}};loadProjects();},[resourceId,navigate]);if(!user)return null;return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-100 font-sans text-gray-900\",children:[/*#__PURE__*/_jsx(Header,{title:\"Mis Proyectos\",subtitle:\"Seleccione un proyecto para cargar horas\"}),/*#__PURE__*/_jsxs(\"main\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-6 flex justify-end\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate('/desarrollador/mis-horas'),className:\"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors shadow-sm\",children:[/*#__PURE__*/_jsx(Clock,{size:20}),\"Ver Mis Horas\"]})}),loading&&/*#__PURE__*/_jsx(LoadingState,{message:\"Cargando tus proyectos...\"}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative\",role:\"alert\",children:[/*#__PURE__*/_jsx(\"strong\",{className:\"font-bold\",children:\"Error!\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"block sm:inline\",children:[\" \",error]}),/*#__PURE__*/_jsx(\"button\",{className:\"ml-4 font-bold\",onClick:()=>window.location.reload(),children:\"Recargar\"})]}),!loading&&!error&&projects.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-10 bg-white rounded-xl shadow-sm border border-gray-200\",children:[/*#__PURE__*/_jsx(Folder,{className:\"h-10 w-10 text-gray-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-medium\",children:\"No tienes proyectos asignados\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Contacta a tu manager para que te asigne proyectos.\"})]}),!loading&&!error&&projects.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:projects.map(project=>/*#__PURE__*/_jsx(\"div\",{onClick:()=>navigate(\"/desarrollador/carga-horas?projectId=\".concat(project.id,\"&projectName=\").concat(encodeURIComponent(project.nombre))),className:\"group cursor-pointer block p-6 bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-lg hover:border-blue-500 transition-all duration-300\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsx(Folder,{className:\"h-6 w-6 text-blue-600 group-hover:text-blue-800\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold text-gray-900 group-hover:text-blue-700\",children:project.nombre}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[\"ID: \",project.id]})]}),/*#__PURE__*/_jsx(ArrowLeft,{className:\"h-5 w-5 ml-auto rotate-180 text-gray-400 group-hover:text-blue-500\"})]})},project.id))})]})]});};export default ProjectSelection;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","Folder","ArrowLeft","Clock","Header","LoadingState","AuthService","APIClient","jsx","_jsx","jsxs","_jsxs","ProjectSelection","navigate","user","getCurrentUser","resourceId","employeeCode","projects","setProjects","loading","setLoading","error","setError","logout","loadProjects","loadedProjects","getProjectsByEmployeeId","err","concat","message","console","className","children","title","subtitle","onClick","size","role","window","location","reload","length","map","project","id","encodeURIComponent","nombre"],"sources":["/home/agusdubo/Desktop/IS1/tribu-A-frontend-2025-2C/src/pages/ProjectSelection.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Folder, ArrowLeft, Clock } from 'lucide-react';\nimport Header from '../components/Header';\nimport LoadingState from '../components/LoadingState';\nimport AuthService from '../services/AuthService';\nimport APIClient from '../services/APIClient';\n\nconst ProjectSelection = () => {\n    const navigate = useNavigate();\n    const user = AuthService.getCurrentUser();\n    const resourceId = user?.employeeCode;\n\n    const [projects, setProjects] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n\n    useEffect(() => {\n        if (!resourceId) {\n            setError('Falta información del empleado. Redirigiendo a login...');\n            AuthService.logout();\n            navigate('/');\n            return;\n        }\n\n        const loadProjects = async () => {\n            setLoading(true);\n            setError(null);\n            try {\n                const loadedProjects = await APIClient.getProjectsByEmployeeId(resourceId);\n                setProjects(loadedProjects);\n            } catch (err) {\n                setError(`Error al cargar proyectos: ${err.message}`);\n                console.error('Error al cargar proyectos:', err);\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        loadProjects();\n    }, [resourceId, navigate]);\n\n    if (!user) return null;\n\n    return (\n        <div className=\"min-h-screen bg-gray-100 font-sans text-gray-900\">\n            <Header\n                title=\"Mis Proyectos\"\n                subtitle=\"Seleccione un proyecto para cargar horas\"\n            />\n\n            <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n                {/* Botón Ver Mis Horas */}\n                <div className=\"mb-6 flex justify-end\">\n                    <button\n                        onClick={() => navigate('/desarrollador/mis-horas')}\n                        className=\"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors shadow-sm\"\n                    >\n                        <Clock size={20} />\n                        Ver Mis Horas\n                    </button>\n                </div>\n\n                {loading && <LoadingState message=\"Cargando tus proyectos...\" />}\n\n                {error && (\n                    <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative\" role=\"alert\">\n                        <strong className=\"font-bold\">Error!</strong>\n                        <span className=\"block sm:inline\"> {error}</span>\n                        <button className=\"ml-4 font-bold\" onClick={() => window.location.reload()}>Recargar</button>\n                    </div>\n                )}\n\n                {!loading && !error && projects.length === 0 && (\n                    <div className=\"text-center p-10 bg-white rounded-xl shadow-sm border border-gray-200\">\n                        <Folder className=\"h-10 w-10 text-gray-400 mx-auto mb-4\" />\n                        <p className=\"text-lg font-medium\">No tienes proyectos asignados</p>\n                        <p className=\"text-sm text-gray-500\">Contacta a tu manager para que te asigne proyectos.</p>\n                    </div>\n                )}\n\n                {!loading && !error && projects.length > 0 && (\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                        {projects.map(project => (\n                            <div\n                                key={project.id}\n                                onClick={() => navigate(`/desarrollador/carga-horas?projectId=${project.id}&projectName=${encodeURIComponent(project.nombre)}`)}\n                                className=\"group cursor-pointer block p-6 bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-lg hover:border-blue-500 transition-all duration-300\"\n                            >\n                                <div className=\"flex items-center gap-4\">\n                                    <Folder className=\"h-6 w-6 text-blue-600 group-hover:text-blue-800\" />\n                                    <div>\n                                        <h3 className=\"text-lg font-bold text-gray-900 group-hover:text-blue-700\">{project.nombre}</h3>\n                                        <p className=\"text-sm text-gray-500\">ID: {project.id}</p>\n                                    </div>\n                                    <ArrowLeft className=\"h-5 w-5 ml-auto rotate-180 text-gray-400 group-hover:text-blue-500\" />\n                                </div>\n                            </div>\n                        ))}\n                    </div>\n                )}\n            </main>\n        </div>\n    );\n};\n\nexport default ProjectSelection;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}