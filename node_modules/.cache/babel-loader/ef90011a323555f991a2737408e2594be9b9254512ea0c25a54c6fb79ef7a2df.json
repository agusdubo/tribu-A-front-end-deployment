{"ast":null,"code":"var _window$APP_CONFIG;\n// APIClient.js - Configurado para Spring Boot Backend\nconst URL_BASE = ((_window$APP_CONFIG = window.APP_CONFIG) === null || _window$APP_CONFIG === void 0 ? void 0 : _window$APP_CONFIG.API_BASE_URL) || \"http://localhost:8080\";\n\n// Endpoints del backend (coinciden con los controllers)\nconst ENDPOINT_RECURSOS = \"/api/resources\";\nconst ENDPOINT_PROYECTOS = \"/api/projects\";\nconst ENDPOINT_TIME_ENTRIES = \"/api/time-entries\";\nconst ENDPOINT_REPORTES = \"/api/reports\";\nconst ENDPOINT_AUTH = \"/auth\";\nfunction getAuthToken() {\n  try {\n    const userStr = sessionStorage.getItem('user');\n    if (userStr) {\n      const user = JSON.parse(userStr);\n      return user.token || null;\n    }\n  } catch (error) {\n    console.error('Error al obtener token:', error);\n  }\n  return null;\n}\nfunction getAuthHeaders() {\n  const headers = {\n    'Content-Type': 'application/json'\n  };\n  const token = getAuthToken();\n  if (token) {\n    headers['Authorization'] = `Bearer ${token}`;\n  }\n  const user = getCurrentUser();\n  if (user && user.employeeCode) {\n    headers['X-Employee-Id'] = user.employeeCode;\n  }\n  return headers;\n}\nlet APIClient = {\n  // ========== RECURSOS ==========\n  getAllResources: async function () {\n    return getData(URL_BASE + ENDPOINT_RECURSOS);\n  },\n  getResourceById: async function (id) {\n    return getData(URL_BASE + ENDPOINT_RECURSOS + \"/\" + id);\n  },\n  // ========== PROYECTOS ==========\n  getAllProjects: async function () {\n    return getData(URL_BASE + ENDPOINT_PROYECTOS);\n  },\n  getProjectsByEmployeeId: async function (employeeId) {\n    return getData(URL_BASE + ENDPOINT_PROYECTOS + \"/resources/\" + employeeId);\n  },\n  // ========== TAREAS - A TRAV√âS DE TU BACKEND (PROXY) ==========\n\n  /**\n   * Obtener tareas del proyecto asignadas a un recurso espec√≠fico\n   * Llama a TU backend, que hace de proxy con la API del profesor\n   */\n  getTasksByProjectAndResource: async function (projectId, resourceId) {\n    try {\n      console.log('üìã Cargando tareas:', {\n        projectId,\n        resourceId\n      });\n\n      // Llamar a TU backend que act√∫a como proxy\n      const url = `${URL_BASE}/api/tasks/project/${projectId}/resource/${resourceId}`;\n      const tasks = await getData(url);\n      console.log('‚úÖ Tareas recibidas:', tasks.length);\n      return tasks;\n    } catch (error) {\n      console.error('‚ùå Error al cargar tareas:', error);\n      throw new Error('No se pudieron cargar las tareas: ' + error.message);\n    }\n  },\n  /**\n   * Obtener todas las tareas de un proyecto (sin filtrar por recurso)\n   */\n  getTasksByProject: async function (projectId) {\n    try {\n      console.log('üìã Cargando todas las tareas del proyecto:', projectId);\n      const url = `${URL_BASE}/api/tasks/project/${projectId}`;\n      const tasks = await getData(url);\n      console.log('‚úÖ Tareas del proyecto:', tasks.length);\n      return tasks;\n    } catch (error) {\n      console.error('‚ùå Error al cargar tareas:', error);\n      throw error;\n    }\n  },\n  // ========== TIME ENTRIES ==========\n  createTimeEntry: async function (data) {\n    const timeEntryData = {\n      employeeId: data.employeeId,\n      projectId: data.projectId,\n      taskId: data.taskId || null,\n      // ‚úÖ AGREGADO\n      workDate: data.workDate,\n      workedMinutes: data.workedMinutes,\n      description: data.description || \"\"\n    };\n    return postData(`${URL_BASE}${ENDPOINT_TIME_ENTRIES}`, timeEntryData);\n  },\n  getTimeEntries: async function (employeeId, startDate, endDate) {\n    let url = `${URL_BASE}${ENDPOINT_TIME_ENTRIES}?employeeId=${employeeId}`;\n    if (startDate && endDate) {\n      url += `&startDate=${startDate}&endDate=${endDate}`;\n    }\n    return getData(url);\n  },\n  getTimeEntryById: async function (id) {\n    return getData(`${URL_BASE}${ENDPOINT_TIME_ENTRIES}/${id}`);\n  },\n  updateTimeEntry: async function (id, data) {\n    const timeEntryData = {\n      taskId: data.taskId || null,\n      // ‚úÖ AGREGADO\n      workDate: data.workDate || data.fecha,\n      workedMinutes: data.workedMinutes || data.horas * 60,\n      description: data.description || data.observaciones || \"\"\n    };\n    return putData(`${URL_BASE}${ENDPOINT_TIME_ENTRIES}/${id}`, timeEntryData);\n  },\n  deleteTimeEntry: async function (id) {\n    return deleteData(`${URL_BASE}${ENDPOINT_TIME_ENTRIES}/${id}`);\n  },\n  submitTimeEntries: async function (timeEntryIds) {\n    return postData(`${URL_BASE}${ENDPOINT_TIME_ENTRIES}/submit`, {\n      timeEntryIds: timeEntryIds\n    });\n  },\n  // ========== MANAGER - APROBACIONES ==========\n  getPendingApproval: async function () {\n    return getData(`${URL_BASE}${ENDPOINT_TIME_ENTRIES}/pending-approval`);\n  },\n  approveTimeEntry: async function (id) {\n    return postData(`${URL_BASE}${ENDPOINT_TIME_ENTRIES}/${id}/approve`, {});\n  },\n  rejectTimeEntry: async function (id) {\n    return postData(`${URL_BASE}${ENDPOINT_TIME_ENTRIES}/${id}/reject`, {});\n  },\n  batchApproval: async function (approvals) {\n    return postData(`${URL_BASE}${ENDPOINT_TIME_ENTRIES}/batch-approval`, approvals);\n  },\n  // ========== REPORTES ==========\n  getWeeklyHoursReport: async function (employeeId, startDate, endDate) {\n    const url = `${URL_BASE}${ENDPOINT_REPORTES}/weekly-hours?employeeId=${employeeId}&startDate=${startDate}&endDate=${endDate}`;\n    return getData(url);\n  },\n  // src/services/APIClient.js\n\n  getProjectResourcesReport: async function (projectId, year) {\n    const url = `${URL_BASE}${ENDPOINT_REPORTES}/project-costs/${year}/${projectId}`;\n    console.log('üìä Llamando a:', url);\n    return getData(url);\n  },\n  // ========== AUTENTICACI√ìN ==========\n  login: async function (employeeCode, password) {\n    return postData(`${URL_BASE}${ENDPOINT_AUTH}/login`, {\n      employeeCode,\n      password\n    });\n  },\n  logout: async function () {\n    sessionStorage.removeItem('user');\n    sessionStorage.removeItem('isAuthenticated');\n    window.location.href = '/login.html';\n  },\n  // ========== M√âTODOS LEGACY (para compatibilidad) ==========\n  getTimeEntriesByResource: async function (id) {\n    return this.getTimeEntries(id);\n  },\n  getResourcesByProjectAndYear: async function (projectId, year) {\n    const month = `${year}-01-01`;\n    return this.getProjectResourcesReport(projectId, year);\n  }\n};\n\n// ========== FUNCIONES AUXILIARES ==========\n\nasync function getData(url) {\n  try {\n    console.log('üîµ GET:', url);\n    const response = await fetch(url, {\n      method: 'GET',\n      headers: getAuthHeaders()\n    });\n    if (!response.ok) {\n      if (response.status === 401) {\n        console.error('‚ùå No autorizado. Redirigiendo a login...');\n        sessionStorage.clear();\n        window.location.href = '/login.html';\n        return null;\n      }\n      const error = new Error(`Error ${response.status}: ${response.statusText}`);\n      error.status = response.status;\n      throw error;\n    }\n    const result = await response.json();\n    console.log(\"‚úÖ GET exitoso:\", result);\n    return result;\n  } catch (error) {\n    console.error('‚ùå Error en getData:', error);\n    throw error;\n  }\n}\nasync function postData(url, data) {\n  try {\n    console.log('üü¢ POST:', url, data);\n    const options = {\n      method: 'POST',\n      headers: getAuthHeaders(),\n      body: JSON.stringify(data)\n    };\n    const response = await fetch(url, options);\n    if (!response.ok) {\n      if (response.status === 401) {\n        console.error('‚ùå No autorizado. Redirigiendo a login...');\n        sessionStorage.clear();\n        window.location.href = '/login.html';\n        return null;\n      }\n      let errorMessage = `Error ${response.status}`;\n      try {\n        const errorData = await response.json();\n        errorMessage = errorData.message || errorData.error || errorMessage;\n      } catch (e) {\n        errorMessage = response.statusText || errorMessage;\n      }\n      throw new Error(errorMessage);\n    }\n    const result = await response.json();\n    console.log(\"‚úÖ POST exitoso:\", result);\n    return result;\n  } catch (error) {\n    console.error('‚ùå Error en postData:', error.message);\n    throw error;\n  }\n}\nasync function putData(url, data) {\n  try {\n    console.log('üü° PUT:', url, data);\n    const options = {\n      method: 'PUT',\n      headers: getAuthHeaders(),\n      body: JSON.stringify(data)\n    };\n    const response = await fetch(url, options);\n    if (!response.ok) {\n      if (response.status === 401) {\n        console.error('‚ùå No autorizado. Redirigiendo a login...');\n        sessionStorage.clear();\n        window.location.href = '/login.html';\n        return null;\n      }\n      let errorMessage = `Error ${response.status}`;\n      try {\n        const errorData = await response.json();\n        errorMessage = errorData.message || errorData.error || errorMessage;\n      } catch (e) {\n        errorMessage = response.statusText || errorMessage;\n      }\n      throw new Error(errorMessage);\n    }\n    const result = await response.json();\n    console.log(\"‚úÖ PUT exitoso:\", result);\n    return result;\n  } catch (error) {\n    console.error('‚ùå Error en putData:', error.message);\n    throw error;\n  }\n}\nasync function deleteData(url) {\n  try {\n    console.log('üî¥ DELETE:', url);\n    const options = {\n      method: 'DELETE',\n      headers: getAuthHeaders()\n    };\n    const response = await fetch(url, options);\n    if (!response.ok) {\n      if (response.status === 401) {\n        console.error('‚ùå No autorizado. Redirigiendo a login...');\n        sessionStorage.clear();\n        window.location.href = '/login.html';\n        return null;\n      }\n      throw new Error(`Error ${response.status}: ${response.statusText}`);\n    }\n    if (response.status === 204) {\n      console.log(\"‚úÖ DELETE exitoso (No Content)\");\n      return {\n        success: true\n      };\n    }\n    const result = await response.json();\n    console.log(\"‚úÖ DELETE exitoso:\", result);\n    return result;\n  } catch (error) {\n    console.error('‚ùå Error en deleteData:', error.message);\n    throw error;\n  }\n}\n\n// ========== FUNCIONES AUXILIARES DE SESI√ìN ==========\n\nfunction getCurrentUser() {\n  try {\n    const userStr = sessionStorage.getItem('user');\n    return userStr ? JSON.parse(userStr) : null;\n  } catch (error) {\n    console.error('Error al obtener usuario:', error);\n    return null;\n  }\n}\nfunction isAuthenticated() {\n  return sessionStorage.getItem('isAuthenticated') === 'true';\n}\n\n// ========== FUNCI√ìN LEGACY (mantener compatibilidad) ==========\nfunction createTimeEntryJson(codigoEmpleado, fecha, proyecto, tarea, horas, status, observaciones) {\n  return {\n    employeeId: codigoEmpleado,\n    workDate: fecha,\n    taskId: tarea,\n    projectId: proyecto,\n    workedMinutes: horas * 60,\n    description: observaciones || \"\"\n  };\n}\nexport default APIClient;","map":{"version":3,"names":["URL_BASE","_window$APP_CONFIG","window","APP_CONFIG","API_BASE_URL","ENDPOINT_RECURSOS","ENDPOINT_PROYECTOS","ENDPOINT_TIME_ENTRIES","ENDPOINT_REPORTES","ENDPOINT_AUTH","getAuthToken","userStr","sessionStorage","getItem","user","JSON","parse","token","error","console","getAuthHeaders","headers","getCurrentUser","employeeCode","APIClient","getAllResources","getData","getResourceById","id","getAllProjects","getProjectsByEmployeeId","employeeId","getTasksByProjectAndResource","projectId","resourceId","log","url","tasks","length","Error","message","getTasksByProject","createTimeEntry","data","timeEntryData","taskId","workDate","workedMinutes","description","postData","getTimeEntries","startDate","endDate","getTimeEntryById","updateTimeEntry","fecha","horas","observaciones","putData","deleteTimeEntry","deleteData","submitTimeEntries","timeEntryIds","getPendingApproval","approveTimeEntry","rejectTimeEntry","batchApproval","approvals","getWeeklyHoursReport","getProjectResourcesReport","year","login","password","logout","removeItem","location","href","getTimeEntriesByResource","getResourcesByProjectAndYear","month","response","fetch","method","ok","status","clear","statusText","result","json","options","body","stringify","errorMessage","errorData","e","success","isAuthenticated","createTimeEntryJson","codigoEmpleado","proyecto","tarea"],"sources":["/home/agusdubo/Desktop/IS1/tribu-A-frontend-2025-2C/src/services/APIClient.js"],"sourcesContent":["// APIClient.js - Configurado para Spring Boot Backend\nconst URL_BASE = window.APP_CONFIG?.API_BASE_URL || \"http://localhost:8080\";\n\n// Endpoints del backend (coinciden con los controllers)\nconst ENDPOINT_RECURSOS = \"/api/resources\"\nconst ENDPOINT_PROYECTOS = \"/api/projects\"\nconst ENDPOINT_TIME_ENTRIES = \"/api/time-entries\"\nconst ENDPOINT_REPORTES = \"/api/reports\"\nconst ENDPOINT_AUTH = \"/auth\"\n\nfunction getAuthToken() {\n    try {\n        const userStr = sessionStorage.getItem('user');\n        if (userStr) {\n            const user = JSON.parse(userStr);\n            return user.token || null;\n        }\n    } catch (error) {\n        console.error('Error al obtener token:', error);\n    }\n    return null;\n}\n\nfunction getAuthHeaders() {\n    const headers = {\n        'Content-Type': 'application/json'\n    };\n\n    const token = getAuthToken();\n    if (token) {\n        headers['Authorization'] = `Bearer ${token}`;\n    }\n\n    const user = getCurrentUser();\n    if (user && user.employeeCode) {\n        headers['X-Employee-Id'] = user.employeeCode;\n    }\n\n    return headers;\n}\n\nlet APIClient = {\n\n    // ========== RECURSOS ==========\n    getAllResources: async function () {\n        return getData(URL_BASE + ENDPOINT_RECURSOS)\n    },\n\n    getResourceById: async function(id) {\n        return getData(URL_BASE + ENDPOINT_RECURSOS + \"/\" + id)\n    },\n\n    // ========== PROYECTOS ==========\n    getAllProjects: async function() {\n        return getData(URL_BASE + ENDPOINT_PROYECTOS)\n    },\n\n    getProjectsByEmployeeId: async function (employeeId) {\n        return getData(URL_BASE + ENDPOINT_PROYECTOS + \"/resources/\" + employeeId)\n    },\n\n    // ========== TAREAS - A TRAV√âS DE TU BACKEND (PROXY) ==========\n\n    /**\n     * Obtener tareas del proyecto asignadas a un recurso espec√≠fico\n     * Llama a TU backend, que hace de proxy con la API del profesor\n     */\n    getTasksByProjectAndResource: async function(projectId, resourceId) {\n        try {\n            console.log('üìã Cargando tareas:', { projectId, resourceId });\n\n            // Llamar a TU backend que act√∫a como proxy\n            const url = `${URL_BASE}/api/tasks/project/${projectId}/resource/${resourceId}`;\n            const tasks = await getData(url);\n\n            console.log('‚úÖ Tareas recibidas:', tasks.length);\n\n            return tasks;\n\n        } catch (error) {\n            console.error('‚ùå Error al cargar tareas:', error);\n            throw new Error('No se pudieron cargar las tareas: ' + error.message);\n        }\n    },\n\n    /**\n     * Obtener todas las tareas de un proyecto (sin filtrar por recurso)\n     */\n    getTasksByProject: async function(projectId) {\n        try {\n            console.log('üìã Cargando todas las tareas del proyecto:', projectId);\n\n            const url = `${URL_BASE}/api/tasks/project/${projectId}`;\n            const tasks = await getData(url);\n\n            console.log('‚úÖ Tareas del proyecto:', tasks.length);\n\n            return tasks;\n\n        } catch (error) {\n            console.error('‚ùå Error al cargar tareas:', error);\n            throw error;\n        }\n    },\n\n    // ========== TIME ENTRIES ==========\n    createTimeEntry: async function(data) {\n        const timeEntryData = {\n            employeeId: data.employeeId,\n            projectId: data.projectId,\n            taskId: data.taskId || null,  // ‚úÖ AGREGADO\n            workDate: data.workDate,\n            workedMinutes: data.workedMinutes,\n            description: data.description || \"\"\n        };\n        return postData(`${URL_BASE}${ENDPOINT_TIME_ENTRIES}`, timeEntryData);\n    },\n\n    getTimeEntries: async function(employeeId, startDate, endDate) {\n        let url = `${URL_BASE}${ENDPOINT_TIME_ENTRIES}?employeeId=${employeeId}`;\n        if (startDate && endDate) {\n            url += `&startDate=${startDate}&endDate=${endDate}`;\n        }\n        return getData(url);\n    },\n\n    getTimeEntryById: async function(id) {\n        return getData(`${URL_BASE}${ENDPOINT_TIME_ENTRIES}/${id}`);\n    },\n\n    updateTimeEntry: async function(id, data) {\n        const timeEntryData = {\n            taskId: data.taskId || null,  // ‚úÖ AGREGADO\n            workDate: data.workDate || data.fecha,\n            workedMinutes: data.workedMinutes || (data.horas * 60),\n            description: data.description || data.observaciones || \"\"\n        };\n        return putData(`${URL_BASE}${ENDPOINT_TIME_ENTRIES}/${id}`, timeEntryData);\n    },\n\n    deleteTimeEntry: async function(id) {\n        return deleteData(`${URL_BASE}${ENDPOINT_TIME_ENTRIES}/${id}`);\n    },\n\n    submitTimeEntries: async function(timeEntryIds) {\n        return postData(`${URL_BASE}${ENDPOINT_TIME_ENTRIES}/submit`, {\n            timeEntryIds: timeEntryIds\n        });\n    },\n\n    // ========== MANAGER - APROBACIONES ==========\n    getPendingApproval: async function() {\n        return getData(`${URL_BASE}${ENDPOINT_TIME_ENTRIES}/pending-approval`);\n    },\n\n    approveTimeEntry: async function(id) {\n        return postData(`${URL_BASE}${ENDPOINT_TIME_ENTRIES}/${id}/approve`, {});\n    },\n\n    rejectTimeEntry: async function(id) {\n        return postData(`${URL_BASE}${ENDPOINT_TIME_ENTRIES}/${id}/reject`, {});\n    },\n\n    batchApproval: async function(approvals) {\n        return postData(`${URL_BASE}${ENDPOINT_TIME_ENTRIES}/batch-approval`, approvals);\n    },\n\n    // ========== REPORTES ==========\n    getWeeklyHoursReport: async function(employeeId, startDate, endDate) {\n        const url = `${URL_BASE}${ENDPOINT_REPORTES}/weekly-hours?employeeId=${employeeId}&startDate=${startDate}&endDate=${endDate}`;\n        return getData(url);\n    },\n\n    // src/services/APIClient.js\n\n    getProjectResourcesReport: async function(projectId, year) {\n        const url = `${URL_BASE}${ENDPOINT_REPORTES}/project-costs/${year}/${projectId}`;\n        console.log('üìä Llamando a:', url);\n        return getData(url);\n    },\n    // ========== AUTENTICACI√ìN ==========\n    login: async function(employeeCode, password) {\n        return postData(`${URL_BASE}${ENDPOINT_AUTH}/login`, {\n            employeeCode,\n            password\n        });\n    },\n\n    logout: async function() {\n        sessionStorage.removeItem('user');\n        sessionStorage.removeItem('isAuthenticated');\n        window.location.href = '/login.html';\n    },\n\n    // ========== M√âTODOS LEGACY (para compatibilidad) ==========\n    getTimeEntriesByResource: async function(id) {\n        return this.getTimeEntries(id);\n    },\n\n    getResourcesByProjectAndYear: async function(projectId, year) {\n        const month = `${year}-01-01`;\n        return this.getProjectResourcesReport(projectId, year);\n    }\n}\n\n// ========== FUNCIONES AUXILIARES ==========\n\nasync function getData(url) {\n    try {\n        console.log('üîµ GET:', url);\n\n        const response = await fetch(url, {\n            method: 'GET',\n            headers: getAuthHeaders()\n        });\n\n        if (!response.ok) {\n            if (response.status === 401) {\n                console.error('‚ùå No autorizado. Redirigiendo a login...');\n                sessionStorage.clear();\n                window.location.href = '/login.html';\n                return null;\n            }\n\n            const error = new Error(`Error ${response.status}: ${response.statusText}`);\n            error.status = response.status;\n            throw error;\n        }\n\n        const result = await response.json();\n        console.log(\"‚úÖ GET exitoso:\", result);\n        return result;\n    } catch (error) {\n        console.error('‚ùå Error en getData:', error);\n        throw error;\n    }\n}\n\nasync function postData(url, data) {\n    try {\n        console.log('üü¢ POST:', url, data);\n\n        const options = {\n            method: 'POST',\n            headers: getAuthHeaders(),\n            body: JSON.stringify(data)\n        };\n\n        const response = await fetch(url, options);\n\n        if (!response.ok) {\n            if (response.status === 401) {\n                console.error('‚ùå No autorizado. Redirigiendo a login...');\n                sessionStorage.clear();\n                window.location.href = '/login.html';\n                return null;\n            }\n\n            let errorMessage = `Error ${response.status}`;\n            try {\n                const errorData = await response.json();\n                errorMessage = errorData.message || errorData.error || errorMessage;\n            } catch (e) {\n                errorMessage = response.statusText || errorMessage;\n            }\n\n            throw new Error(errorMessage);\n        }\n\n        const result = await response.json();\n        console.log(\"‚úÖ POST exitoso:\", result);\n        return result;\n    } catch (error) {\n        console.error('‚ùå Error en postData:', error.message);\n        throw error;\n    }\n}\n\nasync function putData(url, data) {\n    try {\n        console.log('üü° PUT:', url, data);\n\n        const options = {\n            method: 'PUT',\n            headers: getAuthHeaders(),\n            body: JSON.stringify(data)\n        };\n\n        const response = await fetch(url, options);\n\n        if (!response.ok) {\n            if (response.status === 401) {\n                console.error('‚ùå No autorizado. Redirigiendo a login...');\n                sessionStorage.clear();\n                window.location.href = '/login.html';\n                return null;\n            }\n\n            let errorMessage = `Error ${response.status}`;\n            try {\n                const errorData = await response.json();\n                errorMessage = errorData.message || errorData.error || errorMessage;\n            } catch (e) {\n                errorMessage = response.statusText || errorMessage;\n            }\n\n            throw new Error(errorMessage);\n        }\n\n        const result = await response.json();\n        console.log(\"‚úÖ PUT exitoso:\", result);\n        return result;\n    } catch (error) {\n        console.error('‚ùå Error en putData:', error.message);\n        throw error;\n    }\n}\n\nasync function deleteData(url) {\n    try {\n        console.log('üî¥ DELETE:', url);\n\n        const options = {\n            method: 'DELETE',\n            headers: getAuthHeaders()\n        };\n\n        const response = await fetch(url, options);\n\n        if (!response.ok) {\n            if (response.status === 401) {\n                console.error('‚ùå No autorizado. Redirigiendo a login...');\n                sessionStorage.clear();\n                window.location.href = '/login.html';\n                return null;\n            }\n\n            throw new Error(`Error ${response.status}: ${response.statusText}`);\n        }\n\n        if (response.status === 204) {\n            console.log(\"‚úÖ DELETE exitoso (No Content)\");\n            return { success: true };\n        }\n\n        const result = await response.json();\n        console.log(\"‚úÖ DELETE exitoso:\", result);\n        return result;\n    } catch (error) {\n        console.error('‚ùå Error en deleteData:', error.message);\n        throw error;\n    }\n}\n\n// ========== FUNCIONES AUXILIARES DE SESI√ìN ==========\n\nfunction getCurrentUser() {\n    try {\n        const userStr = sessionStorage.getItem('user');\n        return userStr ? JSON.parse(userStr) : null;\n    } catch (error) {\n        console.error('Error al obtener usuario:', error);\n        return null;\n    }\n}\n\nfunction isAuthenticated() {\n    return sessionStorage.getItem('isAuthenticated') === 'true';\n}\n\n// ========== FUNCI√ìN LEGACY (mantener compatibilidad) ==========\nfunction createTimeEntryJson(codigoEmpleado, fecha, proyecto, tarea, horas, status, observaciones) {\n    return {\n        employeeId: codigoEmpleado,\n        workDate: fecha,\n        taskId: tarea,\n        projectId: proyecto,\n        workedMinutes: horas * 60,\n        description: observaciones || \"\"\n    }\n}\n\nexport default APIClient;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}