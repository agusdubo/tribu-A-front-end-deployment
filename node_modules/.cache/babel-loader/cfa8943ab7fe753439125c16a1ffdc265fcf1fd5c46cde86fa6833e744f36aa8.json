{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate,useSearchParams}from'react-router-dom';import{Loader,Filter}from'lucide-react';import Header from'../components/Header';import LoadingState from'../components/LoadingState';import APIClient from'../services/APIClient';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProjectCostReport=()=>{const navigate=useNavigate();const[searchParams]=useSearchParams();const projectId=searchParams.get('id');const projectName=searchParams.get('name');const initialYear=searchParams.get('year')||new Date().getFullYear();const[year,setYear]=useState(initialYear);const[report,setReport]=useState(null);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const currentYear=new Date().getFullYear();// Generar opciones de a√±os (√∫ltimos 5 a√±os)\nconst YEARS=[];for(let i=0;i<5;i++){const y=currentYear-i;YEARS.push(y);}const monthNames=[\"Ene\",\"Feb\",\"Mar\",\"Abr\",\"May\",\"Jun\",\"Jul\",\"Ago\",\"Sep\",\"Oct\",\"Nov\",\"Dic\"];const generarReporte=async()=>{if(!year){alert('Por favor seleccione un a√±o.');return;}setLoading(true);setError(null);setReport(null);try{console.log('üìä Generando reporte para proyecto:',projectId,'a√±o:',year);// CAMBIO IMPORTANTE: Usar el m√©todo correcto con los par√°metros en el orden correcto\nconst reporteData=await APIClient.getProjectResourcesReport(projectId,year);console.log('‚úÖ Reporte recibido:',reporteData);// Validar estructura del reporte\nif(!reporteData){throw new Error('El servidor no devolvi√≥ datos');}if(!reporteData.resources||Object.keys(reporteData.resources).length===0){console.warn('‚ö†Ô∏è No hay recursos en el reporte');}if(!reporteData.months||reporteData.months.length===0){console.warn('‚ö†Ô∏è No hay datos mensuales en el reporte');}setReport(reporteData);}catch(err){console.error('‚ùå Error completo:',err);setError(\"Error al generar reporte: \".concat(err.message));}finally{setLoading(false);}};useEffect(()=>{if(projectId&&year)generarReporte();},[projectId,year]);if(!projectId)return/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 p-4\",children:\"Error: No se especific\\xF3 un proyecto.\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-100 font-sans text-gray-900\",children:[/*#__PURE__*/_jsx(Header,{title:\"Reporte de Costos por Proyecto\",subtitle:\"\".concat(projectName,\" (ID: \").concat(projectId,\")\"),showBack:true,backPath:\"/manager/reportes/costos-proyecto\"}),/*#__PURE__*/_jsxs(\"main\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white p-4 rounded-xl shadow-sm border border-gray-200 mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-4 items-end\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",htmlFor:\"yearSelect\",children:\"Seleccionar A\\xF1o:\"}),/*#__PURE__*/_jsx(\"select\",{id:\"yearSelect\",value:year,onChange:e=>setYear(e.target.value),className:\"bg-gray-50 border border-gray-300 rounded-md p-2 text-sm\",children:YEARS.map(y=>/*#__PURE__*/_jsx(\"option\",{value:y,children:y},y))})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:generarReporte,className:\"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50\",disabled:loading,children:[loading?/*#__PURE__*/_jsx(Loader,{className:\"w-4 h-4 animate-spin\"}):/*#__PURE__*/_jsx(Filter,{size:18}),\" Generar Reporte\"]})]})}),loading&&/*#__PURE__*/_jsx(LoadingState,{message:\"Generando reporte...\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-100 border border-red-400 text-red-700 p-4 rounded mt-6\",children:error}),report&&renderReport(report,monthNames)]})]});};function renderReport(report,monthNames){const months=Array.from({length:12},(_,i)=>i+1);const resourceEntries=Object.entries(report.resources||{});if(resourceEntries.length===0||!report.months||report.months.length===0){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center p-10 bg-white rounded-xl shadow-sm border border-gray-200\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-medium text-gray-600\",children:\"No hay datos de costos para este proyecto y a\\xF1o.\"})});}// Calcular matriz de costos: costByResourceAndMonth[resourceId][month] = costo\nconst costByResourceAndMonth={};resourceEntries.forEach(_ref=>{let[resourceId]=_ref;costByResourceAndMonth[resourceId]={};months.forEach(m=>costByResourceAndMonth[resourceId][m]=0);});// Rellenar con los datos del reporte\n(report.months||[]).forEach(mData=>{const month=mData.month;// 1-12\n(mData.costs||[]).forEach(c=>{if(costByResourceAndMonth[c.resourceId]){costByResourceAndMonth[c.resourceId][month]+=c.totalCost||0;}});});// Calcular subtotales\nconst subtotalPorRecurso={};const subtotalPorMes={};months.forEach(m=>subtotalPorMes[m]=0);let grandTotal=0;resourceEntries.forEach(_ref2=>{let[resourceId]=_ref2;let totalRecurso=0;months.forEach(m=>{const val=costByResourceAndMonth[resourceId][m]||0;totalRecurso+=val;subtotalPorMes[m]+=val;});subtotalPorRecurso[resourceId]=totalRecurso;grandTotal+=totalRecurso;});const recursosConCosto=resourceEntries.length;const mesesConDatos=(report.months||[]).length;return/*#__PURE__*/_jsxs(\"div\",{className:\"report-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-4 rounded-lg shadow-sm border border-gray-200\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-semibold text-gray-500 uppercase\",children:\"Costo Total Proyecto\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xl font-bold text-red-600 mt-1\",children:[\"$\",grandTotal.toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-4 rounded-lg shadow-sm border border-gray-200\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-semibold text-gray-500 uppercase\",children:\"A\\xF1o\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xl font-bold text-blue-600 mt-1\",children:report.year})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-4 rounded-lg shadow-sm border border-gray-200\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-semibold text-gray-500 uppercase\",children:\"Recursos\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xl font-bold text-gray-900 mt-1\",children:recursosConCosto})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-4 rounded-lg shadow-sm border border-gray-200\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-semibold text-gray-500 uppercase\",children:\"Meses con datos\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xl font-bold text-gray-900 mt-1\",children:mesesConDatos})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-xl shadow-sm border border-gray-200 overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider sticky left-0 bg-gray-50 z-10\",children:\"Recurso\"}),monthNames.map((month,idx)=>/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-3 text-center text-xs font-bold text-gray-500 uppercase tracking-wider\",children:month},idx)),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-center text-xs font-bold text-gray-900 uppercase tracking-wider bg-gray-100\",children:\"Total Recurso\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:[resourceEntries.map(_ref3=>{let[resourceId,info]=_ref3;const nombre=info.fullName||\"\".concat(info.nombre||'',\" \").concat(info.apellido||'').trim()||resourceId;return/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-blue-50 transition-colors\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 font-medium text-gray-800 sticky left-0 bg-white z-10\",children:nombre}),months.map(m=>{const val=costByResourceAndMonth[resourceId][m]||0;return/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-4 text-center text-sm text-gray-600\",children:val>0?\"$\".concat(val.toFixed(2)):'-'},m);}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 text-center font-bold text-gray-900 bg-gray-50\",children:[\"$\",subtotalPorRecurso[resourceId].toFixed(2)]})]},resourceId);}),/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-blue-100 font-bold border-t-4 border-blue-600\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-3 text-left text-sm text-gray-900\",children:\"TOTAL MES\"}),months.map(m=>/*#__PURE__*/_jsxs(\"td\",{className:\"px-3 py-3 text-center text-sm text-gray-900\",children:[\"$\",subtotalPorMes[m].toFixed(2)]},m)),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-3 text-center text-lg text-blue-800 bg-blue-200\",children:[\"$\",grandTotal.toFixed(2)]})]})]})]})})]});}export default ProjectCostReport;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useSearchParams","Loader","Filter","Header","LoadingState","APIClient","jsx","_jsx","jsxs","_jsxs","ProjectCostReport","navigate","searchParams","projectId","get","projectName","initialYear","Date","getFullYear","year","setYear","report","setReport","loading","setLoading","error","setError","currentYear","YEARS","i","y","push","monthNames","generarReporte","alert","console","log","reporteData","getProjectResourcesReport","Error","resources","Object","keys","length","warn","months","err","concat","message","className","children","title","subtitle","showBack","backPath","htmlFor","id","value","onChange","e","target","map","onClick","disabled","size","renderReport","Array","from","_","resourceEntries","entries","costByResourceAndMonth","forEach","_ref","resourceId","m","mData","month","costs","c","totalCost","subtotalPorRecurso","subtotalPorMes","grandTotal","_ref2","totalRecurso","val","recursosConCosto","mesesConDatos","toFixed","idx","_ref3","info","nombre","fullName","apellido","trim"],"sources":["/home/agusdubo/Desktop/IS1/tribu-A-frontend-2025-2C/src/pages/ProjectCostReport.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate, useSearchParams } from 'react-router-dom';\nimport { Loader, Filter } from 'lucide-react';\nimport Header from '../components/Header';\nimport LoadingState from '../components/LoadingState';\nimport APIClient from '../services/APIClient';\n\nconst ProjectCostReport = () => {\n    const navigate = useNavigate();\n    const [searchParams] = useSearchParams();\n    const projectId = searchParams.get('id');\n    const projectName = searchParams.get('name');\n    const initialYear = searchParams.get('year') || new Date().getFullYear();\n\n    const [year, setYear] = useState(initialYear);\n    const [report, setReport] = useState(null);\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(null);\n    const currentYear = new Date().getFullYear();\n\n    // Generar opciones de a√±os (√∫ltimos 5 a√±os)\n    const YEARS = [];\n    for (let i = 0; i < 5; i++) {\n        const y = currentYear - i;\n        YEARS.push(y);\n    }\n\n    const monthNames = [\"Ene\", \"Feb\", \"Mar\", \"Abr\", \"May\", \"Jun\", \"Jul\", \"Ago\", \"Sep\", \"Oct\", \"Nov\", \"Dic\"];\n\n    const generarReporte = async () => {\n        if (!year) {\n            alert('Por favor seleccione un a√±o.');\n            return;\n        }\n\n        setLoading(true);\n        setError(null);\n        setReport(null);\n\n        try {\n            console.log('üìä Generando reporte para proyecto:', projectId, 'a√±o:', year);\n\n            // CAMBIO IMPORTANTE: Usar el m√©todo correcto con los par√°metros en el orden correcto\n            const reporteData = await APIClient.getProjectResourcesReport(projectId, year);\n\n            console.log('‚úÖ Reporte recibido:', reporteData);\n\n            // Validar estructura del reporte\n            if (!reporteData) {\n                throw new Error('El servidor no devolvi√≥ datos');\n            }\n\n            if (!reporteData.resources || Object.keys(reporteData.resources).length === 0) {\n                console.warn('‚ö†Ô∏è No hay recursos en el reporte');\n            }\n\n            if (!reporteData.months || reporteData.months.length === 0) {\n                console.warn('‚ö†Ô∏è No hay datos mensuales en el reporte');\n            }\n\n            setReport(reporteData);\n\n        } catch (err) {\n            console.error('‚ùå Error completo:', err);\n            setError(`Error al generar reporte: ${err.message}`);\n        } finally {\n            setLoading(false);\n        }\n    };\n    useEffect(() => {\n        if (projectId && year) generarReporte();\n    }, [projectId, year]);\n\n    if (!projectId) return <p className=\"text-red-500 p-4\">Error: No se especific√≥ un proyecto.</p>;\n\n    return (\n        <div className=\"min-h-screen bg-gray-100 font-sans text-gray-900\">\n            <Header\n                title=\"Reporte de Costos por Proyecto\"\n                subtitle={`${projectName} (ID: ${projectId})`}\n                showBack={true}\n                backPath=\"/manager/reportes/costos-proyecto\"\n            />\n\n            <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n                <div className=\"bg-white p-4 rounded-xl shadow-sm border border-gray-200 mb-6\">\n                    <div className=\"flex gap-4 items-end\">\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700\" htmlFor=\"yearSelect\">Seleccionar A√±o:</label>\n                            <select\n                                id=\"yearSelect\"\n                                value={year}\n                                onChange={(e) => setYear(e.target.value)}\n                                className=\"bg-gray-50 border border-gray-300 rounded-md p-2 text-sm\"\n                            >\n                                {YEARS.map(y => (\n                                    <option key={y} value={y}>{y}</option>\n                                ))}\n                            </select>\n                        </div>\n                        <button\n                            onClick={generarReporte}\n                            className=\"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50\"\n                            disabled={loading}\n                        >\n                            {loading ? <Loader className=\"w-4 h-4 animate-spin\" /> : <Filter size={18} />} Generar Reporte\n                        </button>\n                    </div>\n                </div>\n\n                {loading && <LoadingState message=\"Generando reporte...\" />}\n                {error && <div className=\"bg-red-100 border border-red-400 text-red-700 p-4 rounded mt-6\">{error}</div>}\n\n                {report && renderReport(report, monthNames)}\n            </main>\n        </div>\n    );\n};\n\nfunction renderReport(report, monthNames) {\n    const months = Array.from({ length: 12 }, (_, i) => i + 1);\n    const resourceEntries = Object.entries(report.resources || {});\n\n    if (resourceEntries.length === 0 || !report.months || report.months.length === 0) {\n        return (\n            <div className=\"text-center p-10 bg-white rounded-xl shadow-sm border border-gray-200\">\n                <p className=\"text-lg font-medium text-gray-600\">No hay datos de costos para este proyecto y a√±o.</p>\n            </div>\n        );\n    }\n\n    // Calcular matriz de costos: costByResourceAndMonth[resourceId][month] = costo\n    const costByResourceAndMonth = {};\n    resourceEntries.forEach(([resourceId]) => {\n        costByResourceAndMonth[resourceId] = {};\n        months.forEach(m => costByResourceAndMonth[resourceId][m] = 0);\n    });\n\n    // Rellenar con los datos del reporte\n    (report.months || []).forEach(mData => {\n        const month = mData.month; // 1-12\n        (mData.costs || []).forEach(c => {\n            if (costByResourceAndMonth[c.resourceId]) {\n                costByResourceAndMonth[c.resourceId][month] += c.totalCost || 0;\n            }\n        });\n    });\n\n    // Calcular subtotales\n    const subtotalPorRecurso = {};\n    const subtotalPorMes = {};\n    months.forEach(m => subtotalPorMes[m] = 0);\n    let grandTotal = 0;\n\n    resourceEntries.forEach(([resourceId]) => {\n        let totalRecurso = 0;\n        months.forEach(m => {\n            const val = costByResourceAndMonth[resourceId][m] || 0;\n            totalRecurso += val;\n            subtotalPorMes[m] += val;\n        });\n        subtotalPorRecurso[resourceId] = totalRecurso;\n        grandTotal += totalRecurso;\n    });\n\n    const recursosConCosto = resourceEntries.length;\n    const mesesConDatos = (report.months || []).length;\n\n    return (\n        <div className=\"report-container\">\n            {/* Summary Cards */}\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6\">\n                <div className=\"bg-white p-4 rounded-lg shadow-sm border border-gray-200\">\n                    <p className=\"text-xs font-semibold text-gray-500 uppercase\">Costo Total Proyecto</p>\n                    <p className=\"text-xl font-bold text-red-600 mt-1\">${grandTotal.toFixed(2)}</p>\n                </div>\n                <div className=\"bg-white p-4 rounded-lg shadow-sm border border-gray-200\">\n                    <p className=\"text-xs font-semibold text-gray-500 uppercase\">A√±o</p>\n                    <p className=\"text-xl font-bold text-blue-600 mt-1\">{report.year}</p>\n                </div>\n                <div className=\"bg-white p-4 rounded-lg shadow-sm border border-gray-200\">\n                    <p className=\"text-xs font-semibold text-gray-500 uppercase\">Recursos</p>\n                    <p className=\"text-xl font-bold text-gray-900 mt-1\">{recursosConCosto}</p>\n                </div>\n                <div className=\"bg-white p-4 rounded-lg shadow-sm border border-gray-200\">\n                    <p className=\"text-xs font-semibold text-gray-500 uppercase\">Meses con datos</p>\n                    <p className=\"text-xl font-bold text-gray-900 mt-1\">{mesesConDatos}</p>\n                </div>\n            </div>\n\n            {/* Tabla de costos mensuales */}\n            <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 overflow-x-auto\">\n                <table className=\"min-w-full divide-y divide-gray-200\">\n                    <thead className=\"bg-gray-50\">\n                    <tr>\n                        <th className=\"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider sticky left-0 bg-gray-50 z-10\">\n                            Recurso\n                        </th>\n                        {monthNames.map((month, idx) => (\n                            <th key={idx} className=\"px-3 py-3 text-center text-xs font-bold text-gray-500 uppercase tracking-wider\">\n                                {month}\n                            </th>\n                        ))}\n                        <th className=\"px-6 py-3 text-center text-xs font-bold text-gray-900 uppercase tracking-wider bg-gray-100\">\n                            Total Recurso\n                        </th>\n                    </tr>\n                    </thead>\n                    <tbody className=\"bg-white divide-y divide-gray-200\">\n                    {resourceEntries.map(([resourceId, info]) => {\n                        const nombre = info.fullName ||\n                            `${info.nombre || ''} ${info.apellido || ''}`.trim() ||\n                            resourceId;\n\n                        return (\n                            <tr key={resourceId} className=\"hover:bg-blue-50 transition-colors\">\n                                <td className=\"px-6 py-4 font-medium text-gray-800 sticky left-0 bg-white z-10\">\n                                    {nombre}\n                                </td>\n                                {months.map(m => {\n                                    const val = costByResourceAndMonth[resourceId][m] || 0;\n                                    return (\n                                        <td key={m} className=\"px-3 py-4 text-center text-sm text-gray-600\">\n                                            {val > 0 ? `$${val.toFixed(2)}` : '-'}\n                                        </td>\n                                    );\n                                })}\n                                <td className=\"px-6 py-4 text-center font-bold text-gray-900 bg-gray-50\">\n                                    ${subtotalPorRecurso[resourceId].toFixed(2)}\n                                </td>\n                            </tr>\n                        );\n                    })}\n\n                    {/* Fila de totales por mes */}\n                    <tr className=\"bg-blue-100 font-bold border-t-4 border-blue-600\">\n                        <td className=\"px-6 py-3 text-left text-sm text-gray-900\">\n                            TOTAL MES\n                        </td>\n                        {months.map(m => (\n                            <td key={m} className=\"px-3 py-3 text-center text-sm text-gray-900\">\n                                ${subtotalPorMes[m].toFixed(2)}\n                            </td>\n                        ))}\n                        <td className=\"px-6 py-3 text-center text-lg text-blue-800 bg-blue-200\">\n                            ${grandTotal.toFixed(2)}\n                        </td>\n                    </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    );\n}\n\nexport default ProjectCostReport;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}