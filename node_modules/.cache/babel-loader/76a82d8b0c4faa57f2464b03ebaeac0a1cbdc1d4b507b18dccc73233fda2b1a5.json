{"ast":null,"code":"import _objectSpread from\"/home/agusdubo/Desktop/IS1/tribu-A-frontend-2025-2C/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useMemo}from'react';import{useNavigate,useSearchParams}from'react-router-dom';import{Calendar,Loader,Folder,Send,Save,AlertCircle,Clock}from'lucide-react';import Header from'../components/Header';import AuthService from'../services/AuthService';import APIClient from'../services/APIClient';import{dateUtils}from'../utils/dateUtils';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const HourEntry=()=>{const navigate=useNavigate();const[searchParams]=useSearchParams();const projectId=searchParams.get('projectId');const projectName=searchParams.get('projectName')||'Proyecto';const user=AuthService.getCurrentUser();const resourceId=user===null||user===void 0?void 0:user.employeeCode;const[tasks,setTasks]=useState([]);const[hoursData,setHoursData]=useState({});const[loading,setLoading]=useState(true);const[isSaving,setIsSaving]=useState(false);const[isSubmitting,setIsSubmitting]=useState(false);const[error,setError]=useState(null);const[savedEntryIds,setSavedEntryIds]=useState([]);const days=useMemo(()=>['mon','tue','wed','thu','fri'],[]);// ‚úÖ SIEMPRE LA SEMANA ACTUAL - NO PUEDE CAMBIAR\nconst currentWeek=dateUtils.getCurrentWeekString();const[weekValue,setWeekValue]=useState(currentWeek);// ‚úÖ VALIDAR SI LA SEMANA EST√Å CERRADA\nconst isWeekClosed=weekString=>{return weekString!==currentWeek;};// ========================================\n// VALIDACI√ìN INICIAL\n// ========================================\nuseEffect(()=>{if(!resourceId||!projectId){alert('Faltan datos necesarios. Redirigiendo a selecci√≥n de proyectos.');navigate('/desarrollador/seleccion-proyectos');return;}const loadTasks=async()=>{setLoading(true);setError(null);try{console.log('üìã Cargando tareas del proyecto:',projectId);const loadedTasks=await APIClient.getTasksByProject(projectId);if(!loadedTasks||loadedTasks.length===0){setError('No hay tareas disponibles en este proyecto');setTasks([]);return;}setTasks(loadedTasks);// Inicializar estructura de datos de horas\nconst initialHours={};loadedTasks.forEach(task=>{initialHours[task.id]={mon:0,tue:0,wed:0,thu:0,fri:0};});setHoursData(initialHours);console.log('‚úÖ Tareas cargadas:',loadedTasks.length);}catch(err){console.error('‚ùå Error al cargar tareas:',err);setError('Error al cargar tareas: '+err.message);}finally{setLoading(false);}};loadTasks();},[projectId,resourceId,navigate]);// ========================================\n// MANEJAR CAMBIO DE HORAS\n// ========================================\nconst handleHourInput=(taskId,day,value)=>{let hours=parseFloat(value)||0;hours=Math.max(0,Math.min(24,hours));setHoursData(prev=>_objectSpread(_objectSpread({},prev),{},{[taskId]:_objectSpread(_objectSpread({},prev[taskId]),{},{[day]:hours})}));};// ========================================\n// CALCULAR TOTALES\n// ========================================\nconst totals=useMemo(()=>{let grandTotal=0;let dayTotals={mon:0,tue:0,wed:0,thu:0,fri:0};let taskTotals={};tasks.forEach(task=>{let taskTotal=0;days.forEach(day=>{var _hoursData$task$id;const value=((_hoursData$task$id=hoursData[task.id])===null||_hoursData$task$id===void 0?void 0:_hoursData$task$id[day])||0;taskTotal+=value;dayTotals[day]+=value;});taskTotals[task.id]=taskTotal;grandTotal+=taskTotal;});return{dayTotals,grandTotal,taskTotals};},[hoursData,tasks,days]);// ========================================\n// RESETEAR TABLA\n// ========================================\nconst resetTable=()=>{const initialHours={};tasks.forEach(task=>{initialHours[task.id]={mon:0,tue:0,wed:0,thu:0,fri:0};});setHoursData(initialHours);setSavedEntryIds([]);};// ========================================\n// üíæ GUARDAR HORAS (Estado: DRAFT)\n// ========================================\nconst saveHours=async()=>{if(isWeekClosed(weekValue)){alert('‚õî No puedes guardar horas en semanas cerradas. Solo se permite la semana actual.');return;}if(totals.grandTotal===0){alert('‚ö†Ô∏è No hay horas para guardar');return;}if(!window.confirm(\"\\xBFConfirma guardar \".concat(totals.grandTotal.toFixed(1),\" horas como BORRADOR para la semana actual?\"))){return;}setIsSaving(true);setError(null);try{const monday=dateUtils.getMondayFromWeekInput(weekValue);const entriesToSave=[];const dayOffsets={mon:0,tue:1,wed:2,thu:3,fri:4};tasks.forEach(task=>{days.forEach(day=>{var _hoursData$task$id2;const hours=((_hoursData$task$id2=hoursData[task.id])===null||_hoursData$task$id2===void 0?void 0:_hoursData$task$id2[day])||0;if(hours>0){const workDate=new Date(monday);workDate.setDate(workDate.getDate()+dayOffsets[day]);entriesToSave.push({employeeId:resourceId,projectId:projectId,taskId:task.id,workDate:workDate.toISOString().split('T')[0],workedMinutes:Math.round(hours*60),description:\"\".concat(task.nombre,\" - \").concat(dateUtils.formatDate(workDate))});}});});console.log('üíæ Guardando',entriesToSave.length,'entradas como DRAFT');const newEntryIds=[];for(const entry of entriesToSave){const result=await APIClient.createTimeEntry(entry);newEntryIds.push(result.id);}setSavedEntryIds(newEntryIds);// ‚úÖ LIMPIAR LA TABLA DESPU√âS DE GUARDAR EXITOSAMENTE\nresetTable();alert(\"\\u2705 Se guardaron \".concat(entriesToSave.length,\" registros como BORRADOR!\\n\\n\\uD83D\\uDCDD Ahora puedes enviarlos a aprobaci\\xF3n usando el bot\\xF3n \\\"Enviar a Supervisor\\\".\"));}catch(err){console.error('‚ùå Error al guardar:',err);setError('‚ùå Error al guardar las horas: '+err.message);}finally{setIsSaving(false);}};// ========================================\n// üì§ ENVIAR A SUPERVISOR (Estado: DRAFT ‚Üí SUBMITTED)\n// ========================================\nconst submitToSupervisor=async()=>{if(savedEntryIds.length===0){alert('‚ö†Ô∏è Primero debes guardar las horas antes de enviarlas a aprobaci√≥n');return;}if(isWeekClosed(weekValue)){alert('‚õî No puedes enviar horas de semanas cerradas.');return;}if(!window.confirm(\"\\xBFEnviar \".concat(savedEntryIds.length,\" registro(s) al supervisor para aprobaci\\xF3n?\\n\\nUna vez enviadas, no podr\\xE1s modificarlas.\"))){return;}setIsSubmitting(true);setError(null);try{console.log('üì§ Enviando para aprobaci√≥n:',savedEntryIds);await APIClient.submitTimeEntries(savedEntryIds);alert(\"\\u2705 \\xA1Horas enviadas exitosamente!\\n\\nSe enviaron \".concat(savedEntryIds.length,\" registro(s) para aprobaci\\xF3n del supervisor.\"));resetTable();navigate('/desarrollador/mis-horas');}catch(err){console.error('‚ùå Error al enviar:',err);setError('Error al enviar para aprobaci√≥n: '+err.message);}finally{setIsSubmitting(false);}};// ========================================\n// RENDER: LOADING\n// ========================================\nif(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-100 font-sans text-gray-900\",children:[/*#__PURE__*/_jsx(Header,{title:\"Proyecto: \".concat(projectName),subtitle:\"Carga de Horas Semanal\",showBack:true,backPath:\"/desarrollador/seleccion-proyectos\"}),/*#__PURE__*/_jsx(\"main\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center p-20\",children:[/*#__PURE__*/_jsx(Loader,{className:\"h-12 w-12 animate-spin text-blue-600 mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-lg\",children:\"Cargando tareas del proyecto...\"})]})})]});}// ========================================\n// RENDER: PRINCIPAL\n// ========================================\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-100 font-sans text-gray-900\",children:[/*#__PURE__*/_jsx(Header,{title:\"Proyecto: \".concat(projectName),subtitle:\"Carga de Horas Semanal\",showBack:true,backPath:\"/desarrollador/seleccion-proyectos\"}),/*#__PURE__*/_jsxs(\"main\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center bg-white p-4 rounded-xl shadow-sm border border-gray-200 mb-6\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-lg font-bold text-gray-900 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"h-5 w-5 text-blue-600\"}),\"Semana Actual:\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-end gap-1\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"week\",className:\"bg-gray-100 border border-gray-300 text-gray-900 text-sm rounded-lg block p-2.5 w-48 cursor-not-allowed\",value:weekValue,min:currentWeek,max:currentWeek,disabled:true,readOnly:true}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500\",children:\"Solo se permiten horas de la semana actual\"})]})]}),isWeekClosed(weekValue)&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 border-l-4 border-red-400 p-4 mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(AlertCircle,{className:\"h-5 w-5 text-red-400\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-3\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-red-700\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u26D4 Semana cerrada\"}),\" - Solo puedes cargar horas en la semana actual (Semana \",currentWeek.split('-W')[1],\").\"]})})]})}),savedEntryIds.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(Save,{className:\"h-5 w-5 text-yellow-400\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-3\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-yellow-700\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Horas guardadas como borrador\"}),\" - Tienes \",savedEntryIds.length,\" registro(s) pendientes de enviar al supervisor.\"]})})]})}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6\",children:error}),tasks.length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-xl shadow-sm border border-gray-200 overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider min-w-[200px]\",children:\"TAREA\"}),['LUN','MAR','MI√â','JUE','VIE'].map((day,index)=>/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-3 text-center text-xs font-bold text-gray-500 uppercase tracking-wider min-w-[80px]\",children:day},index)),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-center text-xs font-bold text-gray-900 uppercase tracking-wider bg-gray-100 min-w-[80px]\",children:\"TOTAL\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:[tasks.map(task=>{var _totals$taskTotals$ta;return/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-blue-50 transition-colors\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 font-medium text-gray-800\",children:task.nombre}),days.map(day=>{var _hoursData$task$id3;return/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 text-center\",children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"w-full text-center border border-gray-300 rounded-md p-1.5 text-sm focus:ring-blue-500 focus:border-blue-500\",min:\"0\",max:\"24\",step:\"0.5\",value:((_hoursData$task$id3=hoursData[task.id])===null||_hoursData$task$id3===void 0?void 0:_hoursData$task$id3[day])||'',onChange:e=>handleHourInput(task.id,day,e.target.value),placeholder:\"0\",disabled:isWeekClosed(weekValue)})},day);}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 text-center font-bold text-gray-900 bg-gray-50\",children:((_totals$taskTotals$ta=totals.taskTotals[task.id])===null||_totals$taskTotals$ta===void 0?void 0:_totals$taskTotals$ta.toFixed(1))||'0.0'})]},task.id);}),/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-blue-100 font-bold border-t-4 border-blue-600\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-3 text-left text-sm text-gray-900\",children:\"TOTAL POR D\\xCDA\"}),days.map(day=>/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-3 text-center text-sm text-gray-900\",children:totals.dayTotals[day].toFixed(1)},day)),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-3 text-center text-lg text-blue-800 bg-blue-200\",children:totals.grandTotal.toFixed(1)})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row justify-between gap-3 p-4 bg-gray-50 border-t mt-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-3\",children:/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"flex items-center justify-center gap-2 px-4 py-2 bg-white border border-blue-600 text-blue-600 rounded-lg font-medium hover:bg-blue-50 transition-colors\",onClick:()=>{localStorage.setItem('lastProject',JSON.stringify({projectId:projectId,projectName:projectName}));navigate('/desarrollador/mis-horas');},children:[/*#__PURE__*/_jsx(Clock,{size:18}),\" Ver Mis Horas\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"flex items-center justify-center gap-2 px-6 py-2 bg-gray-600 text-white rounded-lg font-medium hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\",onClick:saveHours,disabled:isSaving||totals.grandTotal===0||isWeekClosed(weekValue),children:isSaving?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Loader,{className:\"w-4 h-4 animate-spin\"}),\"Guardando...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Save,{size:18}),isWeekClosed(weekValue)?'‚õî Semana Cerrada':'Guardar como Borrador']})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"flex items-center justify-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\",onClick:submitToSupervisor,disabled:isSubmitting||savedEntryIds.length===0||isWeekClosed(weekValue),children:isSubmitting?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Loader,{className:\"w-4 h-4 animate-spin\"}),\"Enviando...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Send,{size:18}),isWeekClosed(weekValue)?'‚õî Semana Cerrada':'Enviar a Supervisor']})})]})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-10 bg-white rounded-xl shadow-sm border border-gray-200\",children:[/*#__PURE__*/_jsx(Folder,{className:\"h-16 w-16 text-gray-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-medium text-gray-600\",children:\"No hay tareas disponibles en este proyecto\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/desarrollador/seleccion-proyectos'),className:\"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\",children:\"Volver a Proyectos\"})]})]})]});};export default HourEntry;","map":{"version":3,"names":["React","useState","useEffect","useMemo","useNavigate","useSearchParams","Calendar","Loader","Folder","Send","Save","AlertCircle","Clock","Header","AuthService","APIClient","dateUtils","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","HourEntry","navigate","searchParams","projectId","get","projectName","user","getCurrentUser","resourceId","employeeCode","tasks","setTasks","hoursData","setHoursData","loading","setLoading","isSaving","setIsSaving","isSubmitting","setIsSubmitting","error","setError","savedEntryIds","setSavedEntryIds","days","currentWeek","getCurrentWeekString","weekValue","setWeekValue","isWeekClosed","weekString","alert","loadTasks","console","log","loadedTasks","getTasksByProject","length","initialHours","forEach","task","id","mon","tue","wed","thu","fri","err","message","handleHourInput","taskId","day","value","hours","parseFloat","Math","max","min","prev","_objectSpread","totals","grandTotal","dayTotals","taskTotals","taskTotal","_hoursData$task$id","resetTable","saveHours","window","confirm","concat","toFixed","monday","getMondayFromWeekInput","entriesToSave","dayOffsets","_hoursData$task$id2","workDate","Date","setDate","getDate","push","employeeId","toISOString","split","workedMinutes","round","description","nombre","formatDate","newEntryIds","entry","result","createTimeEntry","submitToSupervisor","submitTimeEntries","className","children","title","subtitle","showBack","backPath","type","disabled","readOnly","map","index","_totals$taskTotals$ta","_hoursData$task$id3","step","onChange","e","target","placeholder","onClick","localStorage","setItem","JSON","stringify","size"],"sources":["/home/agusdubo/Desktop/IS1/tribu-A-frontend-2025-2C/src/pages/HourEntry.js"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\nimport { useNavigate, useSearchParams } from 'react-router-dom';\nimport { Calendar, Loader, Folder, Send, Save, AlertCircle, Clock } from 'lucide-react';\nimport Header from '../components/Header';\nimport AuthService from '../services/AuthService';\nimport APIClient from '../services/APIClient';\nimport { dateUtils } from '../utils/dateUtils';\n\nconst HourEntry = () => {\n    const navigate = useNavigate();\n    const [searchParams] = useSearchParams();\n    const projectId = searchParams.get('projectId');\n    const projectName = searchParams.get('projectName') || 'Proyecto';\n\n    const user = AuthService.getCurrentUser();\n    const resourceId = user?.employeeCode;\n\n    const [tasks, setTasks] = useState([]);\n    const [hoursData, setHoursData] = useState({});\n    const [loading, setLoading] = useState(true);\n    const [isSaving, setIsSaving] = useState(false);\n    const [isSubmitting, setIsSubmitting] = useState(false);\n    const [error, setError] = useState(null);\n    const [savedEntryIds, setSavedEntryIds] = useState([]);\n\n    const days = useMemo(() => ['mon', 'tue', 'wed', 'thu', 'fri'], []);\n\n    // ‚úÖ SIEMPRE LA SEMANA ACTUAL - NO PUEDE CAMBIAR\n    const currentWeek = dateUtils.getCurrentWeekString();\n    const [weekValue, setWeekValue] = useState(currentWeek);\n\n    // ‚úÖ VALIDAR SI LA SEMANA EST√Å CERRADA\n    const isWeekClosed = (weekString) => {\n        return weekString !== currentWeek;\n    };\n\n    // ========================================\n    // VALIDACI√ìN INICIAL\n    // ========================================\n    useEffect(() => {\n        if (!resourceId || !projectId) {\n            alert('Faltan datos necesarios. Redirigiendo a selecci√≥n de proyectos.');\n            navigate('/desarrollador/seleccion-proyectos');\n            return;\n        }\n\n        const loadTasks = async () => {\n            setLoading(true);\n            setError(null);\n            try {\n                console.log('üìã Cargando tareas del proyecto:', projectId);\n                const loadedTasks = await APIClient.getTasksByProject(projectId);\n\n                if (!loadedTasks || loadedTasks.length === 0) {\n                    setError('No hay tareas disponibles en este proyecto');\n                    setTasks([]);\n                    return;\n                }\n\n                setTasks(loadedTasks);\n\n                // Inicializar estructura de datos de horas\n                const initialHours = {};\n                loadedTasks.forEach(task => {\n                    initialHours[task.id] = { mon: 0, tue: 0, wed: 0, thu: 0, fri: 0 };\n                });\n                setHoursData(initialHours);\n\n                console.log('‚úÖ Tareas cargadas:', loadedTasks.length);\n            } catch (err) {\n                console.error('‚ùå Error al cargar tareas:', err);\n                setError('Error al cargar tareas: ' + err.message);\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        loadTasks();\n    }, [projectId, resourceId, navigate]);\n\n    // ========================================\n    // MANEJAR CAMBIO DE HORAS\n    // ========================================\n    const handleHourInput = (taskId, day, value) => {\n        let hours = parseFloat(value) || 0;\n        hours = Math.max(0, Math.min(24, hours));\n\n        setHoursData(prev => ({\n            ...prev,\n            [taskId]: { ...prev[taskId], [day]: hours }\n        }));\n    };\n\n    // ========================================\n    // CALCULAR TOTALES\n    // ========================================\n    const totals = useMemo(() => {\n        let grandTotal = 0;\n        let dayTotals = { mon: 0, tue: 0, wed: 0, thu: 0, fri: 0 };\n        let taskTotals = {};\n\n        tasks.forEach(task => {\n            let taskTotal = 0;\n            days.forEach(day => {\n                const value = hoursData[task.id]?.[day] || 0;\n                taskTotal += value;\n                dayTotals[day] += value;\n            });\n            taskTotals[task.id] = taskTotal;\n            grandTotal += taskTotal;\n        });\n\n        return { dayTotals, grandTotal, taskTotals };\n    }, [hoursData, tasks, days]);\n\n    // ========================================\n    // RESETEAR TABLA\n    // ========================================\n    const resetTable = () => {\n        const initialHours = {};\n        tasks.forEach(task => {\n            initialHours[task.id] = { mon: 0, tue: 0, wed: 0, thu: 0, fri: 0 };\n        });\n        setHoursData(initialHours);\n        setSavedEntryIds([]);\n    };\n\n    // ========================================\n    // üíæ GUARDAR HORAS (Estado: DRAFT)\n    // ========================================\n    const saveHours = async () => {\n        if (isWeekClosed(weekValue)) {\n            alert('‚õî No puedes guardar horas en semanas cerradas. Solo se permite la semana actual.');\n            return;\n        }\n\n        if (totals.grandTotal === 0) {\n            alert('‚ö†Ô∏è No hay horas para guardar');\n            return;\n        }\n\n        if (!window.confirm(`¬øConfirma guardar ${totals.grandTotal.toFixed(1)} horas como BORRADOR para la semana actual?`)) {\n            return;\n        }\n\n        setIsSaving(true);\n        setError(null);\n\n        try {\n            const monday = dateUtils.getMondayFromWeekInput(weekValue);\n            const entriesToSave = [];\n            const dayOffsets = { mon: 0, tue: 1, wed: 2, thu: 3, fri: 4 };\n\n            tasks.forEach(task => {\n                days.forEach(day => {\n                    const hours = hoursData[task.id]?.[day] || 0;\n                    if (hours > 0) {\n                        const workDate = new Date(monday);\n                        workDate.setDate(workDate.getDate() + dayOffsets[day]);\n\n                        entriesToSave.push({\n                            employeeId: resourceId,\n                            projectId: projectId,\n                            taskId: task.id,\n                            workDate: workDate.toISOString().split('T')[0],\n                            workedMinutes: Math.round(hours * 60),\n                            description: `${task.nombre} - ${dateUtils.formatDate(workDate)}`\n                        });\n                    }\n                });\n            });\n\n            console.log('üíæ Guardando', entriesToSave.length, 'entradas como DRAFT');\n\n            const newEntryIds = [];\n            for (const entry of entriesToSave) {\n                const result = await APIClient.createTimeEntry(entry);\n                newEntryIds.push(result.id);\n            }\n\n            setSavedEntryIds(newEntryIds);\n\n            // ‚úÖ LIMPIAR LA TABLA DESPU√âS DE GUARDAR EXITOSAMENTE\n            resetTable();\n\n            alert(`‚úÖ Se guardaron ${entriesToSave.length} registros como BORRADOR!\\n\\nüìù Ahora puedes enviarlos a aprobaci√≥n usando el bot√≥n \"Enviar a Supervisor\".`);\n\n        } catch (err) {\n            console.error('‚ùå Error al guardar:', err);\n            setError('‚ùå Error al guardar las horas: ' + err.message);\n        } finally {\n            setIsSaving(false);\n        }\n    };\n\n    // ========================================\n    // üì§ ENVIAR A SUPERVISOR (Estado: DRAFT ‚Üí SUBMITTED)\n    // ========================================\n    const submitToSupervisor = async () => {\n        if (savedEntryIds.length === 0) {\n            alert('‚ö†Ô∏è Primero debes guardar las horas antes de enviarlas a aprobaci√≥n');\n            return;\n        }\n\n        if (isWeekClosed(weekValue)) {\n            alert('‚õî No puedes enviar horas de semanas cerradas.');\n            return;\n        }\n\n        if (!window.confirm(`¬øEnviar ${savedEntryIds.length} registro(s) al supervisor para aprobaci√≥n?\\n\\nUna vez enviadas, no podr√°s modificarlas.`)) {\n            return;\n        }\n\n        setIsSubmitting(true);\n        setError(null);\n\n        try {\n            console.log('üì§ Enviando para aprobaci√≥n:', savedEntryIds);\n\n            await APIClient.submitTimeEntries(savedEntryIds);\n\n            alert(`‚úÖ ¬°Horas enviadas exitosamente!\\n\\nSe enviaron ${savedEntryIds.length} registro(s) para aprobaci√≥n del supervisor.`);\n\n            resetTable();\n            navigate('/desarrollador/mis-horas');\n\n        } catch (err) {\n            console.error('‚ùå Error al enviar:', err);\n            setError('Error al enviar para aprobaci√≥n: ' + err.message);\n        } finally {\n            setIsSubmitting(false);\n        }\n    };\n\n    // ========================================\n    // RENDER: LOADING\n    // ========================================\n    if (loading) {\n        return (\n            <div className=\"min-h-screen bg-gray-100 font-sans text-gray-900\">\n                <Header\n                    title={`Proyecto: ${projectName}`}\n                    subtitle=\"Carga de Horas Semanal\"\n                    showBack={true}\n                    backPath=\"/desarrollador/seleccion-proyectos\"\n                />\n                <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n                    <div className=\"flex flex-col items-center justify-center p-20\">\n                        <Loader className=\"h-12 w-12 animate-spin text-blue-600 mb-4\" />\n                        <p className=\"text-gray-600 text-lg\">Cargando tareas del proyecto...</p>\n                    </div>\n                </main>\n            </div>\n        );\n    }\n\n    // ========================================\n    // RENDER: PRINCIPAL\n    // ========================================\n    return (\n        <div className=\"min-h-screen bg-gray-100 font-sans text-gray-900\">\n            <Header\n                title={`Proyecto: ${projectName}`}\n                subtitle=\"Carga de Horas Semanal\"\n                showBack={true}\n                backPath=\"/desarrollador/seleccion-proyectos\"\n            />\n\n            <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n\n                {/* SELECTOR DE SEMANA - BLOQUEADO A SEMANA ACTUAL */}\n                <div className=\"flex justify-between items-center bg-white p-4 rounded-xl shadow-sm border border-gray-200 mb-6\">\n                    <h2 className=\"text-lg font-bold text-gray-900 flex items-center gap-2\">\n                        <Calendar className=\"h-5 w-5 text-blue-600\" />\n                        Semana Actual:\n                    </h2>\n                    <div className=\"flex flex-col items-end gap-1\">\n                        <input\n                            type=\"week\"\n                            className=\"bg-gray-100 border border-gray-300 text-gray-900 text-sm rounded-lg block p-2.5 w-48 cursor-not-allowed\"\n                            value={weekValue}\n                            min={currentWeek}\n                            max={currentWeek}\n                            disabled={true}\n                            readOnly\n                        />\n                        <span className=\"text-xs text-gray-500\">\n                            Solo se permiten horas de la semana actual\n                        </span>\n                    </div>\n                </div>\n\n                {/* ‚ö†Ô∏è ADVERTENCIA SI LA SEMANA EST√Å CERRADA */}\n                {isWeekClosed(weekValue) && (\n                    <div className=\"bg-red-50 border-l-4 border-red-400 p-4 mb-6\">\n                        <div className=\"flex items-center\">\n                            <div className=\"flex-shrink-0\">\n                                <AlertCircle className=\"h-5 w-5 text-red-400\" />\n                            </div>\n                            <div className=\"ml-3\">\n                                <p className=\"text-sm text-red-700\">\n                                    <strong>‚õî Semana cerrada</strong> - Solo puedes cargar horas en la semana actual (Semana {currentWeek.split('-W')[1]}).\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                )}\n\n                {/* üìù INDICADOR DE ESTADO */}\n                {savedEntryIds.length > 0 && (\n                    <div className=\"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6\">\n                        <div className=\"flex items-center\">\n                            <div className=\"flex-shrink-0\">\n                                <Save className=\"h-5 w-5 text-yellow-400\" />\n                            </div>\n                            <div className=\"ml-3\">\n                                <p className=\"text-sm text-yellow-700\">\n                                    <strong>Horas guardadas como borrador</strong> - Tienes {savedEntryIds.length} registro(s) pendientes de enviar al supervisor.\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                )}\n\n                {/* ERROR */}\n                {error && (\n                    <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6\">\n                        {error}\n                    </div>\n                )}\n\n                {/* TABLA DE HORAS */}\n                {tasks.length > 0 ? (\n                    <>\n                        <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 overflow-x-auto\">\n                            <table className=\"min-w-full divide-y divide-gray-200\">\n                                <thead className=\"bg-gray-50\">\n                                <tr>\n                                    <th className=\"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider min-w-[200px]\">\n                                        TAREA\n                                    </th>\n                                    {['LUN', 'MAR', 'MI√â', 'JUE', 'VIE'].map((day, index) => (\n                                        <th key={index} className=\"px-3 py-3 text-center text-xs font-bold text-gray-500 uppercase tracking-wider min-w-[80px]\">\n                                            {day}\n                                        </th>\n                                    ))}\n                                    <th className=\"px-6 py-3 text-center text-xs font-bold text-gray-900 uppercase tracking-wider bg-gray-100 min-w-[80px]\">\n                                        TOTAL\n                                    </th>\n                                </tr>\n                                </thead>\n                                <tbody className=\"bg-white divide-y divide-gray-200\">\n                                {tasks.map(task => (\n                                    <tr key={task.id} className=\"hover:bg-blue-50 transition-colors\">\n                                        <td className=\"px-6 py-4 font-medium text-gray-800\">\n                                            {task.nombre}\n                                        </td>\n                                        {days.map(day => (\n                                            <td key={day} className=\"px-3 py-2 text-center\">\n                                                <input\n                                                    type=\"number\"\n                                                    className=\"w-full text-center border border-gray-300 rounded-md p-1.5 text-sm focus:ring-blue-500 focus:border-blue-500\"\n                                                    min=\"0\"\n                                                    max=\"24\"\n                                                    step=\"0.5\"\n                                                    value={hoursData[task.id]?.[day] || ''}\n                                                    onChange={(e) => handleHourInput(task.id, day, e.target.value)}\n                                                    placeholder=\"0\"\n                                                    disabled={isWeekClosed(weekValue)}\n                                                />\n                                            </td>\n                                        ))}\n                                        <td className=\"px-6 py-4 text-center font-bold text-gray-900 bg-gray-50\">\n                                            {totals.taskTotals[task.id]?.toFixed(1) || '0.0'}\n                                        </td>\n                                    </tr>\n                                ))}\n\n                                {/* FILA DE TOTALES */}\n                                <tr className=\"bg-blue-100 font-bold border-t-4 border-blue-600\">\n                                    <td className=\"px-6 py-3 text-left text-sm text-gray-900\">\n                                        TOTAL POR D√çA\n                                    </td>\n                                    {days.map(day => (\n                                        <td key={day} className=\"px-3 py-3 text-center text-sm text-gray-900\">\n                                            {totals.dayTotals[day].toFixed(1)}\n                                        </td>\n                                    ))}\n                                    <td className=\"px-6 py-3 text-center text-lg text-blue-800 bg-blue-200\">\n                                        {totals.grandTotal.toFixed(1)}\n                                    </td>\n                                </tr>\n                                </tbody>\n                            </table>\n                        </div>\n\n                        {/* BOTONES DE ACCI√ìN */}\n                        <div className=\"flex flex-col sm:flex-row justify-between gap-3 p-4 bg-gray-50 border-t mt-6\">\n                            {/* IZQUIERDA: Navegaci√≥n */}\n                            <div className=\"flex gap-3\">\n                                {/* üìä BOT√ìN: VER MIS HORAS */}\n                                <button\n                                    type=\"button\"\n                                    className=\"flex items-center justify-center gap-2 px-4 py-2 bg-white border border-blue-600 text-blue-600 rounded-lg font-medium hover:bg-blue-50 transition-colors\"\n                                    onClick={() => {\n                                        localStorage.setItem('lastProject', JSON.stringify({\n                                            projectId: projectId,\n                                            projectName: projectName\n                                        }));\n                                        navigate('/desarrollador/mis-horas');\n                                    }}\n                                >\n                                    <Clock size={18} /> Ver Mis Horas\n                                </button>\n                            </div>\n\n                            {/* DERECHA: Acciones */}\n                            <div className=\"flex gap-3\">\n                                {/* üíæ GUARDAR COMO BORRADOR */}\n                                <button\n                                    type=\"button\"\n                                    className=\"flex items-center justify-center gap-2 px-6 py-2 bg-gray-600 text-white rounded-lg font-medium hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n                                    onClick={saveHours}\n                                    disabled={isSaving || totals.grandTotal === 0 || isWeekClosed(weekValue)}\n                                >\n                                    {isSaving ? (\n                                        <>\n                                            <Loader className=\"w-4 h-4 animate-spin\" />\n                                            Guardando...\n                                        </>\n                                    ) : (\n                                        <>\n                                            <Save size={18} />\n                                            {isWeekClosed(weekValue) ? '‚õî Semana Cerrada' : 'Guardar como Borrador'}\n                                        </>\n                                    )}\n                                </button>\n\n                                {/* üì§ ENVIAR A SUPERVISOR */}\n                                <button\n                                    type=\"button\"\n                                    className=\"flex items-center justify-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n                                    onClick={submitToSupervisor}\n                                    disabled={isSubmitting || savedEntryIds.length === 0 || isWeekClosed(weekValue)}\n                                >\n                                    {isSubmitting ? (\n                                        <>\n                                            <Loader className=\"w-4 h-4 animate-spin\" />\n                                            Enviando...\n                                        </>\n                                    ) : (\n                                        <>\n                                            <Send size={18} />\n                                            {isWeekClosed(weekValue) ? '‚õî Semana Cerrada' : 'Enviar a Supervisor'}\n                                        </>\n                                    )}\n                                </button>\n                            </div>\n                        </div>\n                    </>\n                ) : (\n                    <div className=\"text-center p-10 bg-white rounded-xl shadow-sm border border-gray-200\">\n                        <Folder className=\"h-16 w-16 text-gray-400 mx-auto mb-4\" />\n                        <p className=\"text-lg font-medium text-gray-600\">No hay tareas disponibles en este proyecto</p>\n                        <button\n                            onClick={() => navigate('/desarrollador/seleccion-proyectos')}\n                            className=\"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\"\n                        >\n                            Volver a Proyectos\n                        </button>\n                    </div>\n                )}\n            </main>\n        </div>\n    );\n};\n\nexport default HourEntry;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}